apiVersion: v1
kind: ConfigMap
metadata:
  name: alertmanager-templates
  namespace: monitoring
data:
  default-template.tmpl: |
    {{ define "defaultTemplate" }}
      {{ if .CommonAnnotations.runbook_url }}
        ğŸ“š Runbook: {{ .CommonAnnotations.runbook_url }}
      {{ end }}
      {{ range .Alerts }}
        ğŸš¨ Description: {{ .Annotations.description }}
        ğŸ• Time: {{ .StartsAt }}
      {{ end }}
    {{ end }}
  pod-template.tmpl: |
    {{ define "podTemplate" }}
      ğŸ“š Runbook: https://goorm.notion.site/SRE-Prometheus-Runbook-1bc4e6997fb080fe87dbd4a82033f8ef?pvs=4
      {{ range .Alerts }}
        ğŸš¨ Namespace: {{ .Labels.namespace }}
        ğŸš¨ Pod(Container): {{ .Labels.pod }}({{ .Labels.container }})
        ğŸ• Time: {{ .StartsAt }}
      {{ end }}
    {{ end }}
  node-template.tmpl: |
      {{ define "nodeTemplate" }}
        ğŸ“š Runbook: https://goorm.notion.site/SRE-Prometheus-Runbook-1bc4e6997fb080fe87dbd4a82033f8ef?pvs=4
        {{ range .Alerts }}
          ğŸš¨ Node(Instance): {{ .Labels.node }}({{ .Labels.instance }})
          ğŸ• Time: {{ .StartsAt }}
        {{ end }}
      {{ end }}
  job-template.tmpl: |
    {{ define "jobTemplate" }}
        ğŸ“š Runbook: https://goorm.notion.site/SRE-Prometheus-Runbook-1bc4e6997fb080fe87dbd4a82033f8ef?pvs=4
        {{ range .Alerts }}
          ğŸš¨ Namespace: {{ .Labels.namespace }}
          ğŸš¨ Job Name: {{ .Labels.job_name }}
          ğŸ• Time: {{ .StartsAt }}
        {{ end }}
      {{ end }}
  statefulset-template.tmpl: |
    {{ define "statefulsetTemplate" }}
        ğŸ“š Runbook: https://goorm.notion.site/SRE-Prometheus-Runbook-1bc4e6997fb080fe87dbd4a82033f8ef?pvs=4
        {{ range .Alerts }}
          ğŸš¨ Namespace: {{ .Labels.namespace }}
          ğŸš¨ StatefulSet Name: {{ .Labels.statefulset }}
          ğŸ• Time: {{ .StartsAt }}
        {{ end }}
    {{ end }}
  hpa-template.tmpl: |
    {{ define "hpaTemplate" }}
        ğŸ“š Runbook: https://goorm.notion.site/SRE-Prometheus-Runbook-1bc4e6997fb080fe87dbd4a82033f8ef?pvs=4
        {{ range .Alerts }}
          ğŸš¨ Namespace: {{ .Labels.namespace }}
          ğŸš¨ HPA Name: {{ .Labels.horizontalpodautoscaler }}
          ğŸ• Time: {{ .StartsAt }}
        {{ end }}
    {{ end }}
  pvc-template.tmpl: |
    {{ define "pvcTemplate" }}
        ğŸ“š Runbook: https://goorm.notion.site/SRE-Prometheus-Runbook-1bc4e6997fb080fe87dbd4a82033f8ef?pvs=4
        {{ range .Alerts }}
          ğŸš¨ Namespace: {{ .Labels.namespace }}
          ğŸš¨ PVC Name: {{ .Labels.persistentvolumeclaim }}
          ğŸ• Time: {{ .StartsAt }}
        {{ end }}
    {{ end }}
